<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>ðŸ”” Notificaciones - Admin</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    h2 {
      color: #2e7d32;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: white;
      margin-bottom: 10px;
      padding: 15px;
      border-left: 5px solid #2e7d32;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .fecha {
      font-size: 0.85em;
      color: #666;
      margin-top: 5px;
    }
  </style>
</head>
<body>

  <h2>ðŸ”” Notificaciones Recientes</h2>
  <ul id="notificaciones"></ul>

  <script>
    const token = localStorage.getItem('token');

    fetch('/api/admin/notificaciones', {
      headers: {
        Authorization: token
      }
    })
    .then(res => res.json())
    .then(data => {
      const ul = document.getElementById('notificaciones');
      if (Array.isArray(data)) {
        data.reverse().forEach(noti => {
          const li = document.createElement('li');
          li.innerHTML = `
            <div>${noti.mensaje}</div>
            <div class="fecha">${new Date(noti.fecha).toLocaleString()}</div>
          `;
          ul.appendChild(li);
        });
      } else {
        ul.innerHTML = '<li>No hay notificaciones.</li>';
      }
    })
    .catch(err => {
      console.error(err);
      alert('Error al cargar notificaciones');
    });
  </script>

</body>
</html>
