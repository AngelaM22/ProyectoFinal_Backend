<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Tienda Saludable</title>
</head>
<body>
  <button onclick="pagar()">Pagar</button>
  <script src="https://checkout.culqi.com/js/v4"></script>
  <script>
    Culqi.publicKey = 'TU_LLAVE_PUBLICA';

    function pagar() {
      Culqi.settings({
        title: 'Tienda Saludable',
        currency: 'PEN',
        description: 'Pago de productos',
        amount: 5000  // S/. 50.00
      });

      Culqi.open();
    }

    function culqi() {
      if (Culqi.token) {
        const token = Culqi.token.id;

        fetch('http://localhost:3000/api/culqi/pago', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer TOKEN_DEL_USUARIO'
          },
          body: JSON.stringify({
            token,
            email: Culqi.token.email,
            monto: 5000,
            ordenId: 'ID_DE_ORDEN'
          })
        })
        .then(res => res.json())
        .then(data => console.log(data))
        .catch(err => console.error(err));
      } else {
        console.error(Culqi.error);
      }
    }
  </script>
</body>
</html>
